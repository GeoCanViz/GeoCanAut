(function(){define(["knockout","gcaut-func"],function(b,a){var d,c,e;d=function(n,r,i,j){var u,v,s,o,m=[],q=n.layers.length-1,p=-1,g=n.layers,l=n.initialExtent,t=n.fullExtent,f=i,h,k;while(p!==q){o={};u=g[p+1];v=u.name;s=u.id;o.name=v;o.fullname=v;o.url=f+"/"+s;o.id=s;o.scale={min:u.minScale,max:u.maxScale};o.isChecked=b.observable(false);o.isUse=b.observable(false);o.category=j;o.servLayers=c(u,g,[],f,o.fullname,r,j);o.isChecked=b.observable(false);o.isUse=b.observable(false);if(o.servLayers.length>0){p=e(o.servLayers,0)}else{p=o.id}m.push(o)}r.servLayers([]);r.servLayers(m);if(j==="base"){r.selectMapSR(r.srType[a.getSrTypeIndex(r.srType,n.spatialReference.wkid)]);if(typeof n.tileInfo!=="undefined"){h=n.tileInfo.lods;k=h.length;while(k--){h[k].isChecked=b.observable(true)}r.lods(h)}r.maxExtentMinX(t.xmin);r.maxExtentMinY(t.ymin);r.maxExtentMaxX(t.xmax);r.maxExtentMaxY(t.ymax);r.initExtentMinX(l.xmin);r.initExtentMinY(l.ymin);r.initExtentMaxX(l.xmax);r.initExtentMaxY(l.ymax)}};c=function(p,g,l,f,s,o,j){var m={},i,h,q,k,n,r;if(j==="base"){r=o.selectBaseLayerType().id}else{r=o.selectLayerType().id}i=p.subLayerIds;if(i!==null){n=i.length;while(n--){m={};m.servLayers=[];h=g[i[n]];q=h.name;k=h.id;m.name=q;m.fullname=s+"/"+q;m.url=f+"/"+k;m.id=k;m.scale={min:h.minScale,max:h.maxScale};m.isChecked=b.observable(false);m.isUse=b.observable(false);m.category=j;m.type=r;l.push(m);c(h,g,l[l.length-1].servLayers,f,m.fullname,o,j)}}return l};e=function(g,j){var i,f,h;if(g.length>0){f=g.length;while(f--){h=g[f].servLayers;if(h.length>0){i=e(h,j);j=(i>j)?i:j}else{i=g[f].id;j=(i>j)?i:j}}}return j};return{readInfo:d}})}());